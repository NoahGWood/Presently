{% extends 'base.html' %}
{% block meta %}
<!-- Tell robots we love them -->
<meta name=”robots” content=”index,follow”>{% endblock meta %}
{% block title %}Home{% endblock title %}
{% block body %}
<h2>Presently</h2>
<div id="videoModal" class="modal">
    <div class="modal-content">
    <iframe width="560" height="315" src="https://www.youtube.com/embed/QvcXtuhTd_M?enablejsapi=1&version=3&playerapiid=ytplayer" title="YouTube video player"
        frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
        allowfullscreen id="youtubeVideo"></iframe>
        <span class="close">&times;</span>
    </div>
</div>
{% if current_user.is_authenticated %}
<div class="row">
    <div class="col">
        {% include 'partials/presentation_card.html' %}
    </div>
    <div class="col">
        {% include 'partials/subscription_status.html' %}
    </div>
    <div class="col">
        {% include 'partials/account_settings.html' %}
    </div>
</div>
{% else %}
<article>
    <figure>
        <img src="{{ url_for('static', filename='imgs/Hotpot.png') }}" alt="Cave image generated by the Dall-E AI">
        <figcaption><button data-size="big" id="launchButton">Watch It Work!</button>
            <br />
            <p>Welcome to Presently!</p>
            <p>Our technology allows you to create beautiful and entertaining</p>
            <p>presentations from any text, markdown, or html file you have!</p>
        </figcaption>
    </figure>
    {% include 'partials/call_to_action.html' %}
</article>
{% endif %}
{% endblock body %}

{% block  javascript %}
<script>
    var yt = document.getElementById("youtubeVideo");
    var videoModal = document.getElementById("videoModal");
    var launchVideo = document.getElementById("launchButton")
    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];

    launchVideo.onclick = function() {
        videoModal.style.display = "block";
        yt.contentWindow.postMessage('{"event":"command","func":"' + 'playVideo' + '","args":""}', '*');
    }

    span.onclick = function () {
        videoModal.style.display = "none";
        yt.contentWindow.postMessage('{"event":"command","func":"' + 'stopVideo' + '","args":""}', '*');
    }

    window.onclick = function(event) {
        if (event.target != videoModal && event.target != launchVideo) {
            videoModal.style.display = "none";
            yt.contentWindow.postMessage('{"event":"command","func":"' + 'stopVideo' + '","args":""}', '*');
        }
    }

</script>
{% endblock javascript %}